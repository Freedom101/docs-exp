"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[93449],{20421:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>a,toc:()=>l});var s=t(74848),i=t(28453);const o={},r="GitHub",a={id:"use-rocket.chat/workspace-administration/integrations/github",title:"GitHub",description:"Setting up GitHub webhook integration with Rocket.Chat gives you the ability to",source:"@site/docs/use-rocket.chat/workspace-administration/integrations/github.md",sourceDirName:"use-rocket.chat/workspace-administration/integrations",slug:"/use-rocket.chat/workspace-administration/integrations/github",permalink:"/docs-exp/docs/use-rocket.chat/workspace-administration/integrations/github",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/use-rocket.chat/workspace-administration/integrations/github.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Giphy Integrations",permalink:"/docs-exp/docs/use-rocket.chat/workspace-administration/integrations/giphy-integrations"},next:{title:"GitLab",permalink:"/docs-exp/docs/use-rocket.chat/workspace-administration/integrations/gitlab"}},c={},l=[{value:"GitHub Rocket.Chat Integration",id:"github-rocketchat-integration",level:2},{value:"Rocket.Chat Incoming webhook with GitHub",id:"rocketchat-incoming-webhook-with-github",level:3},{value:"Creating new GitHub webhook integration",id:"creating-new-github-webhook-integration",level:4},{value:"GitHub Webhook Setting",id:"github-webhook-setting",level:4},{value:"Rocket.Chat GitHub Outgoing Webhook",id:"rocketchat-github-outgoing-webhook",level:3},{value:"Customizing your integration scripts",id:"customizing-your-integration-scripts",level:2}];function u(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components},{Details:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"github",children:"GitHub"}),"\n",(0,s.jsx)(n.p,{children:"Setting up GitHub webhook integration with Rocket.Chat gives you the ability to"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Receive event notifications from GitHub directly in your specified Rocket.Chat room (",(0,s.jsx)(n.strong,{children:"Incoming WebHook"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:["Send commands to GitHub and optionally receive a response (",(0,s.jsx)(n.strong,{children:"Outgoing WebHook"}),")."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"These events include and are not limited to:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Comments"}),"\n",(0,s.jsx)(n.li,{children:"Issues events"}),"\n",(0,s.jsx)(n.li,{children:"Pull Requests"}),"\n",(0,s.jsx)(n.li,{children:"Merge requests"}),"\n",(0,s.jsx)(n.li,{children:"Deployment events"}),"\n",(0,s.jsx)(n.li,{children:"Comments and discussions"}),"\n",(0,s.jsx)(n.li,{children:"Tags, label and branch actions"}),"\n",(0,s.jsx)(n.li,{children:"etc."}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsx)(n.p,{children:"In configuring this integration, make sure your Rocket.Chat is publicly available on a URL."})}),"\n",(0,s.jsx)(n.h2,{id:"github-rocketchat-integration",children:"GitHub Rocket.Chat Integration"}),"\n",(0,s.jsx)(n.p,{children:"We are going to see how to create both incoming and outgoing webhook integration between Rocket.Chat and GitHub."}),"\n",(0,s.jsx)(n.h3,{id:"rocketchat-incoming-webhook-with-github",children:"Rocket.Chat Incoming webhook with GitHub"}),"\n",(0,s.jsx)(n.p,{children:"To configure an incoming webhook integration between GitHub and Rocket.Chat, you need to:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/docs-exp/docs/use-rocket.chat/workspace-administration/integrations/github#creating-new-github-webhook-integration",children:"Create a new webhook integration on Rocket.Chat"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/docs-exp/docs/use-rocket.chat/workspace-administration/integrations/github#github-webhook-setting",children:"Link the GitHub repository through webhook settings"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"The following steps explain how to do this"}),"\n",(0,s.jsx)(n.h4,{id:"creating-new-github-webhook-integration",children:"Creating new GitHub webhook integration"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Go to the ",(0,s.jsx)(n.strong,{children:"Administration"})," -> ",(0,s.jsx)(n.strong,{children:"Workspace"})," -> ",(0,s.jsx)(n.strong,{children:"Integrations"})," settings on your Rocket.Chat workspace"]}),"\n",(0,s.jsxs)(n.li,{children:["Switch to the ",(0,s.jsx)(n.strong,{children:"Incoming"})," tab and create a ",(0,s.jsx)(n.strong,{children:"New"})," Integration"]}),"\n",(0,s.jsxs)(n.li,{children:["Fill in the details of your webhook including the ",(0,s.jsx)(n.strong,{children:"name"})," of the webhook, the ",(0,s.jsx)(n.strong,{children:"room"})," to post into, the ",(0,s.jsx)(n.strong,{children:"user to post as"})," and enable it"]}),"\n"]}),"\n",(0,s.jsxs)("figure",{children:[(0,s.jsx)("img",{src:"/img/image (1056).png",alt:""}),(0,s.jsx)("figcaption",{children:(0,s.jsx)("p",{children:"Create new GitHub incoming webhook"})})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Enable Scripts and paste any of the following example code into the Scripts box."}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:["You can customize your webhook integration script to suit your desire as explained ",(0,s.jsx)(n.a,{href:"/docs-exp/docs/use-rocket.chat/workspace-administration/integrations/github#customizing-your-integration-scripts",children:"here"}),"."]})}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsx)("summary",{children:"GitHub Example Script 1"}),(0,s.jsx)(n.p,{children:"This script will generate notifications for the following repository events:"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Issue events (create, edit, close, reopen, assign, label, etc)"}),"\n",(0,s.jsx)(n.li,{children:"Issue comment events"}),"\n",(0,s.jsx)(n.li,{children:"Push events (singular and multiple commits)"}),"\n"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"/* exported Script */\n\nString.prototype.capitalizeFirstLetter = function() {\n    return this.charAt(0).toUpperCase() + this.slice(1);\n}\n\nconst getLabelsField = (labels) => {\n  let labelsArray = [];\n  labels.forEach(function(label) {\n    labelsArray.push(label.name);\n  });\n  labelsArray = labelsArray.join(', ');\n  return {\n    title: 'Labels',\n    value: labelsArray,\n    short: labelsArray.length <= 40\n  };\n};\n\nconst githubEvents = {\n  ping(request) {\n    return {\n      content: {\n        text: '_' + request.content.hook.id + '_\\n' + ':thumbsup: ' + request.content.zen\n      }\n    };\n  },\n\n  /* NEW OR MODIFY ISSUE */\n  issues(request) {\n    const user = request.content.sender;\n\n    if (request.content.action == \"opened\" || request.content.action == \"reopened\" || request.content.action == \"edited\") {\n        var body = request.content.issue.body;\n    } else if (request.content.action == \"labeled\") {\n        var body = \"Current labels: \" + getLabelsField(request.content.issue.labels).value;\n    } else if (request.content.action == \"assigned\" || request.content.action == \"unassigned\") {\n        // Note that the issues API only gives you one assignee.\n        var body = \"Current assignee: \" + request.content.issue.assignee.login;\n    } else if (request.content.action == \"closed\") {\n        if (request.content.issue.closed_by) {\n            var body = \"Closed by: \" + request.content.issue.closed_by.login;\n        } else {\n            var body = \"Closed.\";\n        }\n    } else {\n        return {\n          error: {\n            success: false,\n            message: 'Unsupported issue action'\n          }\n        };\n    }\n\n    const action = request.content.action.capitalizeFirstLetter();\n\n    const text = '_' + request.content.repository.full_name + '_\\n' +\n                '**[' + action + ' issue \u200b#' + request.content.issue.number +\n                ' - ' + request.content.issue.title + '](' +\n                request.content.issue.html_url + ')**\\n\\n' +\n                body;\n\n    return {\n      content: {\n        attachments: [\n            {\n                thumb_url: user.avatar_url,\n                text: text,\n                fields: []\n            }\n        ]\n      }\n    };\n  },\n\n  /* COMMENT ON EXISTING ISSUE */\n  issue_comment(request) {\n    const user = request.content.comment.user;\n\n    if (request.content.action == \"edited\") {\n        var action = \"Edited comment \";\n    } else {\n        var action = \"Comment \"\n    }\n\n    const text = '_' + request.content.repository.full_name + '_\\n' +\n                '**[' + action + ' on issue \u200b#' + request.content.issue.number +\n                ' - ' + request.content.issue.title + '](' +\n                request.content.comment.html_url + ')**\\n\\n' +\n                request.content.comment.body;\n\n    return {\n      content: {\n        attachments: [\n            {\n                thumb_url: user.avatar_url,\n                text: text,\n                fields: []\n            }\n        ]\n      }\n    };\n  },\n\n /* COMMENT ON COMMIT */\ncommit_comment(request) {\n    const user = request.content.comment.user;\n\n    if (request.content.action == \"edited\") {\n        var action = \"Edited comment \";\n    } else {\n        var action = \"Comment \"\n    }\n\n    const text = '_' + request.content.repository.full_name + '_\\n' +\n                '**[' + action + ' on commit id ' + request.content.comment.commit_id +\n                ' - ' +  + '](' +\n                request.content.comment.html_url + ')**\\n\\n' +\n                request.content.comment.body;\n\n    return {\n      content: {\n        attachments: [\n            {\n                thumb_url: user.avatar_url,\n                text: text,\n                fields: []\n            }\n        ]\n      }\n    };\n  },\n  /* END OF COMMENT ON COMMIT */\n\n  /* PUSH TO REPO */\n  push(request) {\n    var commits = request.content.commits;\n    var multi_commit = \"\"\n    var is_short = true;\n    var changeset = 'Changeset';\n    if ( commits.length > 1 ) {\n      var multi_commit = \" [Multiple Commits]\";\n      var is_short = false;\n      var changeset = changeset + 's';\n      var output = [];\n    }\n    const user = request.content.sender;\n\n    var text = '**Pushed to ' + \"[\"+request.content.repository.full_name+\"](\"+request.content.repository.url+\"):\"\n                + request.content.ref.split('/').pop() + \"**\\n\\n\";\n\n    for (var i = 0; i < commits.length; i++) {\n      var commit = commits[i];\n      var shortID = commit.id.substring(0,7);\n      var a = '[' + shortID + '](' + commit.url + ') - ' + commit.message;\n      if ( commits.length > 1 ) {\n        output.push( a );\n      } else {\n        var output = a;\n      }\n    }\n\n    if (commits.length > 1) {\n      text += output.reverse().join('\\n');\n    } else {\n      text += output;\n    }\n\n    return {\n      content: {\n        attachments: [\n            {\n                thumb_url: user.avatar_url,\n                text: text,\n                fields: []\n            }\n        ]\n      }\n    };\n  },  // End GitHub Push\n\n  /* NEW PULL REQUEST */\n  pull_request(request) {\n    const user = request.content.sender;\n\n   if (request.content.action == \"opened\" || request.content.action == \"reopened\" || request.content.action == \"edited\" || request.content.action == \"synchronize\") {\n        var body = request.content.pull_request.body;\n    } else if (request.content.action == \"labeled\") {\n        var body = \"Current labels: \" + getLabelsField(request.content.pull_request.labels).value;\n    } else if (request.content.action == \"assigned\" || request.content.action == \"unassigned\") {\n        // Note that the issues API only gives you one assignee.\n        var body = \"Current assignee: \" + request.content.pull_request.assignee.login;\n    } else if (request.content.action == \"closed\") {\n        if (request.content.pull_request.merged) {\n            var body = \"Merged by: \" + request.content.pull_request.merged_by.login;\n        } else {\n            var body = \"Closed.\";\n        }\n    } else {\n        return {\n          error: {\n            success: false,\n            message: 'Unsupported pull request action'\n          }\n        };\n    }\n\n    const action = request.content.action.capitalizeFirstLetter();\n\n    const text = '_' + request.content.repository.full_name + '_\\n' +\n                '**[' + action + ' pull request \u200b#' + request.content.pull_request.number +\n                ' - ' + request.content.pull_request.title + '](' +\n                request.content.pull_request.html_url + ')**\\n\\n' +\n                body;\n\n    return {\n      content: {\n        attachments: [\n            {\n                thumb_url: user.avatar_url,\n                text: text,\n                fields: []\n            }\n        ]\n      }\n    };\n  },\n};\n\nclass Script {\n  process_incoming_request({ request }) {\n    const header = request.headers['x-github-event'];\n    if (githubEvents[header]) {\n      return githubEvents[header](request);\n    }\n\n    return {\n      error: {\n        success: false,\n        message: 'Unsupported method'\n      }\n    };\n  }\n}\n"})})]}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsx)("summary",{children:"GitHub Example Script 2"}),(0,s.jsx)(n.p,{children:"This script will generate notifications for the following repository events:"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"New and closed issue events"}),"\n",(0,s.jsx)(n.li,{children:"Comment events (issues only)"}),"\n",(0,s.jsx)(n.li,{children:"Push events (singular and multiple commits)"}),"\n"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"/* exported Script */\n\n// Begin embedded images\nconst gh_cmit_svg = '<svg xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\" class=\"octicon octicon-git-commit\" height=\"16\" version=\"1.1\" viewBox=\"0 0 14 16\" width=\"14\"><path d=\"M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z\"></path></svg>';\nconst gh_pr_svg = '<svg xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\" class=\"octicon octicon-git-pull-request\" height=\"16\" version=\"1.1\" viewBox=\"0 0 12 16\" width=\"12\"><path d=\"M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z\"></path></svg>';\nconst gh_iss_svg = '<svg xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\" class=\"octicon octicon-issue-opened\" height=\"16\" version=\"1.1\" viewBox=\"0 0 14 16\" width=\"14\"><path d=\"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z\"></path></svg>';\nconst svg_inline_prefix = 'data:image/svg+xml;ascii,';\n// End embedded images\n\nconst getLabelsField = (labels) => {\n  let labelsArray = [];\n  labels.forEach(function(label) {\n    labelsArray.push(label.name);\n  });\n  labelsArray = labelsArray.join(', ');\n  return {\n    title: 'Labels',\n    value: labelsArray,\n    short: labelsArray.length <= 40\n  };\n};\n\nconst githubEvents = {\n  ping(request) {\n    return {\n      content: {\n        text: ':thumbsup: ' + request.content.zen\n      }\n    };\n  },\n\n  issues(request) {\n    const user = request.content.sender;\n    const attachment = {\n      author_icon: svg_inline_prefix + gh_iss_svg,\n      author_name: '#' + request.content.issue.number + ' - ' + request.content.issue.title,\n      author_link: request.content.issue.html_url,\n      fields: []\n    };\n\n    if (request.content.issue.labels) {\n      attachment.fields.push(getLabelsField(request.content.issue.labels));\n    }\n\n    if (request.content.issue.assignee) {\n      attachment.fields.push({\n        title: 'Assignee',\n        value: request.content.issue.assignee.login,\n        short: true\n      });\n    }\n\n    const actions = {\n      'assigned': ':inbox_tray:',\n      'unassigned': ':outbox_tray:',\n      'opened': ':triangular_flag_on_post:',\n      'closed': ':white_check_mark:',\n      'reopened': ':triangular_flag_on_post:',\n      'labeled': ':label:',\n      'unlabeled': ':label:',\n      'edited': ':pencil:'\n    };\n\n    const text = actions[request.content.action] + ' issue';\n\n    return {\n      content: {\n        icon_url: user.avatar_url,\n        alias: user.login,\n        text: text,\n        attachments: [attachment]\n      }\n    };\n  },\n\n  issue_comment(request) {\n    const user = request.content.comment.user;\n    var attachment = {\n      author_icon: svg_inline_prefix + gh_iss_svg,\n      author_name: '#' + request.content.issue.number + ' - ' + request.content.issue.title,\n      author_link: request.content.comment.html_url,\n      fields: []\n    };\n\n    if (request.content.issue.labels) {\n      attachment.fields.push(getLabelsField(request.content.issue.labels));\n    }\n\n    if (request.content.issue.assignee) {\n      attachment.fields.push({\n        title: 'Assignee',\n        value: request.content.issue.assignee.login,\n        short: true\n      });\n    }\n\n    const text = ':speech_balloon: ' + request.content.comment.body;\n\n    return {\n      content: {\n        icon_url: user.avatar_url,\n        alias: user.login,\n        text: text,\n        attachments: [attachment]\n      }\n    };\n  },\n\n  pull_request(request) {\n    const user = request.content.sender;\n    const attachment = {\n      author_icon: svg_inline_prefix + gh_pr_svg,\n      author_name: '#' + request.content.pull_request.number + ' - ' + request.content.pull_request.title,\n      author_link: request.content.pull_request.html_url\n    };\n\n    let text = 'Pull request';\n    switch (request.content.action) {\n      case 'assigned':\n        text += ' assigned to: ' + request.content.assignee.login;\n        break;\n      case 'unassigned':\n        text += ' unassigned of ' + request.content.assignee.login;\n        break;\n      case 'opened':\n        text += ' opened';\n        break;\n      case 'closed':\n        if (request.content.pull_request.merged) {\n          text += ' merged';\n        } else {\n          text += ' closed';\n        }\n        break;\n      case 'reopened':\n        text += ' reopened';\n        break;\n      case 'labeled':\n        text += ' added label: \"' + request.content.label.name + '\" ';\n        break;\n      case 'unlabeled':\n        text += ' removed label: \"' + request.content.label.name + '\" ';\n        break;\n      case 'synchronize':\n        text += ' synchronized';\n    }\n\n    return {\n      content: {\n        icon_url: user.avatar_url,\n        alias: user.login,\n        text: text,\n        attachments: [attachment]\n      }\n    };\n  },\n\n  //// GitHub push event\n  push(request) {\n    var commits = request.content.commits;\n    var multi_commit = \"\"\n    var is_short = true;\n    var changeset = 'Changeset';\n    if ( commits.length > 1 ) {\n      var multi_commit = \" [Multiple Commits]\";\n      var is_short = false;\n      var changeset = changeset + 's';\n      var output = [];\n    }\n    const user = request.content.sender;\n    const attachment = {\n    author_icon: svg_inline_prefix + gh_cmit_svg,\n      author_name: \"Message: \" + request.content.head_commit.message + multi_commit,\n      author_link: request.content.compare,\n      fields: []\n    };\n\n    if (request.content.repository.full_name) {\n      attachment.fields.push({\n        title: 'Repo',\n        value: \"[\"+request.content.repository.full_name+\"](\"+request.content.repository.url+\")\",\n        short: is_short\n      });\n    }\n\n    for (var i = 0; i < commits.length; i++) {\n      var commit = commits[i];\n      var shortID = commit.id.substring(0,7);\n      if ( commits.length > 1 ) {\n        output = '[' + shortID + '](' + commit.url + ') - ' + commit.message\n        if (i == 0){\n            attachment.fields.push({\n                title: changeset,\n                value: output,\n                short: is_short\n            });\n        } else{\n            attachment.fields.push({\n                title: changeset,\n                value: output,\n                short: is_short\n            });\n        }\n      } else {\n        output = \"[\" + shortID + \"](\" + commit.url + \")\"\n        attachment.fields.push({\n            title: changeset,\n            value: output,\n            short: is_short\n        });\n      }\n    }\n\n    const text = ':ballot_box_with_check: Pushed to ' + \"[\"+request.content.ref.split('/').pop()+\"]\";\n\n    return {\n      content: {\n        icon_url: user.avatar_url,\n        alias: user.login,\n        text: text,\n        attachments: [attachment]\n      }\n  };\n  },  // End GitHub Push\n};\n\nclass Script {\n  process_incoming_request({ request }) {\n    const header = request.headers['x-github-event'];\n    if (githubEvents[header]) {\n      return githubEvents[header](request);\n    }\n\n    return {\n      error: {\n        success: false,\n        message: 'Unsupported method'\n      }\n    };\n  }\n}\n"})})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Save"})," the settings"]}),"\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.strong,{children:"Webhook URL"})," and ",(0,s.jsx)(n.strong,{children:"Token"})," are generated after saving"]}),"\n",(0,s.jsx)(n.li,{children:"Copy these credentials, they will be used later"}),"\n"]}),"\n",(0,s.jsxs)("figure",{children:[(0,s.jsx)("img",{src:"/img/image (705).png",alt:""}),(0,s.jsx)("figcaption",{children:(0,s.jsx)("p",{children:"GitHub webhook url and token"})})]}),"\n",(0,s.jsx)(n.h4,{id:"github-webhook-setting",children:"GitHub Webhook Setting"}),"\n",(0,s.jsx)(n.p,{children:"After creating the new incoming webhook integration on Rocket.Chat, it is time to link it up with the GitHub repository."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Go to the GitHub project repository then navigate to ",(0,s.jsx)(n.strong,{children:"Settings"})," > ",(0,s.jsx)(n.strong,{children:"Webhooks"})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Add webhook"})," and fill in the ",(0,s.jsx)(n.code,{children:"URL"})," and ",(0,s.jsx)(n.code,{children:"token"})," you copied from the Rocket.Chat setting"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Select the list of events you want to be notified on and ",(0,s.jsx)(n.strong,{children:"Add webhook"})]}),"\n",(0,s.jsxs)("figure",{children:[(0,s.jsx)("img",{src:"/img/image (232).png",alt:""}),(0,s.jsx)("figcaption",{children:(0,s.jsx)("p",{children:"GitHub webhook setting"})})]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsx)(n.p,{children:"After successful configuration, you can test the Webhook with any event trigger and see the notification in your specified Rocket.Chat room."})}),"\n",(0,s.jsxs)("figure",{children:[(0,s.jsx)("img",{src:"/img/image (474).png",alt:""}),(0,s.jsx)("figcaption",{children:(0,s.jsx)("p",{children:"GitHub webhook notifications"})})]}),"\n",(0,s.jsx)(n.h3,{id:"rocketchat-github-outgoing-webhook",children:"Rocket.Chat GitHub Outgoing Webhook"}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsx)(n.p,{children:"Sending outgoing webhooks only works on public repositories"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Create a new ",(0,s.jsx)(n.strong,{children:"Outgoing WebHook"})]}),"\n",(0,s.jsx)(n.li,{children:"Select the channel where you will use the commands and receive the responses"}),"\n",(0,s.jsxs)(n.li,{children:["Set ",(0,s.jsx)(n.strong,{children:"URLs"})," as ",(0,s.jsx)(n.code,{children:"https://api.github.com/repos/User-Or-Org-Name/Repo-Name"})," like ",(0,s.jsx)(n.code,{children:"https://api.github.com/repos/RocketChat/Rocket.Chat"})]}),"\n",(0,s.jsx)(n.li,{children:"Enable Scripts"}),"\n",(0,s.jsxs)(n.li,{children:["Use this ",(0,s.jsx)(n.strong,{children:"Script"})," to listen for commands ",(0,s.jsx)(n.code,{children:"pr ls"}),", ",(0,s.jsx)(n.code,{children:"pr list"})," and ",(0,s.jsx)(n.code,{children:"help"})]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"    /* exported Script */\n    /* globals Store */\n\n    class Script {\n      prepare_outgoing_request({ request }) {\n        let match;\n\n        console.log('lastCmd', Store.get('lastCmd'));\n\n        match = request.data.text.match(/^pr last$/);\n        if (match && Store.get('lastCmd')) {\n          request.data.text = Store.get('lastCmd');\n        }\n\n        match = request.data.text.match(/^pr\\s(ls|list)\\s*(open|closed|all)?$/);\n        if (match) {\n          Store.set('lastCmd', request.data.text);\n          let u = request.url + '/pulls';\n          if (match[2]) {\n            u += '?state='+match[2];\n          }\n          return {\n            url: u,\n            headers: request.headers,\n            method: 'GET'\n          };\n        }\n\n        match = request.data.text.match(/^help$/);\n        if (match) {\n          Store.set('lastCmd', request.data.text);\n          return {\n            message: {\n              text: [\n                '**GitHub commands**',\n                '```',\n                  '  pr ls|list [open|closed|all]  List Pull Requests',\n                '```'\n              ].join('\\n')\n            }\n          };\n        }\n      }\n\n      process_outgoing_response({ request, response }) {\n        var text = [];\n        response.content.forEach(function(pr) {\n          text.push('> '+pr.state+' [#'+pr.number+']('+pr.html_url+') - '+pr.title);\n        });\n\n        return {\n          content: {\n            text: text.join('\\n'),\n            parseUrls: false\n          }\n        };\n      }\n    }\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Save"})," your integration"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"customizing-your-integration-scripts",children:"Customizing your integration scripts"}),"\n",(0,s.jsx)(n.p,{children:"The purpose of the integration script is to transform data in one format (the format provided by your incoming service, such as GitHub) into another format (the format expected by Rocket.Chat). Therefore, should you wish to customize either of the scripts presented above, you will need two resources:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://developer.github.com/v3/",children:"GitHub API specifications"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"./#incoming-webhook-script",children:"Specifications for Rocket.Chat integration message objects"})}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:["Note that data comes into your script from GitHub as the ",(0,s.jsx)(n.code,{children:"request.content"})," object."]})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>a});var s=t(96540);const i={},o=s.createContext(i);function r(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);