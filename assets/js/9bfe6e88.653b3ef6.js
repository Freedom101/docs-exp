"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[96042],{97551:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>d,contentTitle:()=>r,default:()=>u,frontMatter:()=>n,metadata:()=>a,toc:()=>l});var s=i(85893),o=i(11151);const n={},r="Recommendations for File Upload",a={id:"use-rocket.chat/workspace-administration/settings/file-upload/recommendations-for-file-upload",title:"Recommendations for File Upload",description:"GridFS",source:"@site/docs/use-rocket.chat/workspace-administration/settings/file-upload/recommendations-for-file-upload.md",sourceDirName:"use-rocket.chat/workspace-administration/settings/file-upload",slug:"/use-rocket.chat/workspace-administration/settings/file-upload/recommendations-for-file-upload",permalink:"/docs-exp/docs/use-rocket.chat/workspace-administration/settings/file-upload/recommendations-for-file-upload",draft:!1,unlisted:!1,editUrl:"https://github.com/Freedom101/docs-exp/tree/main/my-website/docs/use-rocket.chat/workspace-administration/settings/file-upload/recommendations-for-file-upload.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Minio",permalink:"/docs-exp/docs/use-rocket.chat/workspace-administration/settings/file-upload/minio"},next:{title:"General",permalink:"/docs-exp/docs/use-rocket.chat/workspace-administration/settings/general/"}},d={},l=[{value:"GridFS",id:"gridfs",level:2},{value:"FileSystem",id:"filesystem",level:2}];function c(e){const t={admonition:"admonition",h1:"h1",h2:"h2",p:"p",strong:"strong",...(0,o.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h1,{id:"recommendations-for-file-upload",children:"Recommendations for File Upload"}),"\n",(0,s.jsx)(t.h2,{id:"gridfs",children:"GridFS"}),"\n",(0,s.jsx)(t.p,{children:"GridFS is the MongoDB specification for storing and retrieving large files such as images, audio files, video files, etc. It is a kind of a file system to store files, but its data is stored within MongoDB collections. GridFS has the capability to store files even greater than its document size limit of 16MB."}),"\n",(0,s.jsx)(t.p,{children:"GridFS divides a file into chunks and stores each chunk of data in a separate document, each of maximum size 255k."}),"\n",(0,s.jsxs)(t.p,{children:["GridFS, by default uses two collections ",(0,s.jsx)(t.strong,{children:"fs.files"})," and ",(0,s.jsx)(t.strong,{children:"fs.chunks,"})," to store the file's metadata and the chunks. Each chunk is identified by its unique _id ObjectId field. The fs.files serves as a parent document. The ",(0,s.jsx)(t.strong,{children:"files_id"})," field in the fs.chunks document links the chunk to its parent."]}),"\n",(0,s.jsx)(t.p,{children:"Though GridFS is used in rocket.chat for file storage because MongoDB offers this functionality with zero configuration, but GridFS is not recommended for day to day file storage needs in a production environment because it puts an immense amount of load on the database."}),"\n",(0,s.jsx)(t.admonition,{type:"info",children:(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"GridFS"})," is only sustainable if you are using Retention Policy and only storing a small number of files per week, which are not hefty, but it is not recommended by us because it is not scalable."]})}),"\n",(0,s.jsx)(t.h2,{id:"filesystem",children:"FileSystem"}),"\n",(0,s.jsx)(t.p,{children:"It stores the files on the FileSystem of the server where your Rocket.Chat instance is running. It is a good option, but the problem arises when you start to scale. Because if you decide to have multiple Rocket.Chat servers to support a larger number of users, the FileSystem needs to be shared between all the Rocket.Chat servers."}),"\n",(0,s.jsx)(t.p,{children:"If you want to have two separate virtual/physical servers, you will somehow have to share the folder too where your files are stored using, for example NFS. It will require a lot of configurations."}),"\n",(0,s.jsx)(t.admonition,{type:"info",children:(0,s.jsxs)(t.p,{children:["We suggest ",(0,s.jsx)(t.strong,{children:"FileSystem"})," only when you are running a single Rocket.Chat instance."]})}),"\n",(0,s.jsx)(t.admonition,{type:"info",children:(0,s.jsxs)(t.p,{children:["What we recommend as the best option for the file upload system are ",(0,s.jsx)(t.strong,{children:"Amazon"})," ",(0,s.jsx)(t.strong,{children:"S3"})," and ",(0,s.jsx)(t.strong,{children:"Google Cloud Storage"}),"."]})})]})}function u(e={}){const{wrapper:t}={...(0,o.a)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},11151:(e,t,i)=>{i.d(t,{Z:()=>a,a:()=>r});var s=i(67294);const o={},n=s.createContext(o);function r(e){const t=s.useContext(n);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),s.createElement(n.Provider,{value:t},e.children)}}}]);