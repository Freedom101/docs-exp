"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[83561],{81715:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>l});var o=t(74848),s=t(28453);const r={},c="Deploy with CentOS",a={id:"deploy/deploy-rocket.chat/additional-deployment-methods/deploy-with-centos",title:"Deploy with CentOS",description:"Preparation Steps",source:"@site/docs/deploy/deploy-rocket.chat/additional-deployment-methods/deploy-with-centos.md",sourceDirName:"deploy/deploy-rocket.chat/additional-deployment-methods",slug:"/deploy/deploy-rocket.chat/additional-deployment-methods/deploy-with-centos",permalink:"/docs-exp/docs/deploy/deploy-rocket.chat/additional-deployment-methods/deploy-with-centos",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/deploy/deploy-rocket.chat/additional-deployment-methods/deploy-with-centos.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Deploy on Windows 10",permalink:"/docs-exp/docs/deploy/deploy-rocket.chat/additional-deployment-methods/deploy-on-windows-10"},next:{title:"Deploy with Digital Ocean",permalink:"/docs-exp/docs/deploy/deploy-rocket.chat/additional-deployment-methods/deploy-with-digital-ocean"}},i={},l=[{value:"Preparation Steps",id:"preparation-steps",level:2},{value:"Install Rocket.Chat on CentOS",id:"install-rocketchat-on-centos",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h1,{id:"deploy-with-centos",children:"Deploy with CentOS"}),"\n",(0,o.jsx)(n.h2,{id:"preparation-steps",children:"Preparation Steps"}),"\n",(0,o.jsxs)(n.p,{children:["Depending on the version of ",(0,o.jsx)(n.a,{href:"https://rocket.chat/",children:"Rocket.Chat"})," you want to install, check the ",(0,o.jsx)(n.a,{href:"https://github.com/RocketChat/Rocket.Chat/releases",children:"release notes"})," to see the supported engine versions for MongoDB and NodeJs, and install as recommended. "]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"MongoDB"})}),"\n",(0,o.jsxs)(n.p,{children:["Please refer to the official MongoDB documentation on ",(0,o.jsx)(n.a,{href:"https://www.mongodb.com/docs/manual/tutorial/install-mongodb-on-red-hat/",children:"installing MongoDB on CentOS"}),". "]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"NodeJS"})}),"\n",(0,o.jsxs)(n.p,{children:["Follow the ",(0,o.jsx)(n.a,{href:"https://nodejs.org/en/download/package-manager/#centos-fedora-and-red-hat-enterprise-linux",children:"official guide"})," to install NodeJS on CentOS. You can also use third-party tools like ",(0,o.jsx)(n.a,{href:"https://github.com/nvm-sh/nvm#installing-and-updating",children:"nvm"})," or ",(0,o.jsx)(n.a,{href:"https://www.npmjs.com/package/n",children:"n"}),"."]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"install-rocketchat-on-centos",children:"Install Rocket.Chat on CentOS"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Install the required dependency packages."}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"sudo yum install -y GraphicsMagick\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Download and extract the ",(0,o.jsx)(n.a,{href:"https://github.com/RocketChat/Rocket.Chat/releases/latest",children:"latest release "}),"of Rocket.Chat."]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"curl -L https://releases.rocket.chat/latest/download -o /tmp/rocket.chat.tgz\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Extract the Rocket.Chat server files."}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"tar -xzf /tmp/rocket.chat.tgz -C /tmp\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"cd /tmp/bundle/programs/server && npm install\n"})}),"\n",(0,o.jsx)(n.admonition,{type:"warning",children:(0,o.jsxs)(n.p,{children:["When executing ",(0,o.jsx)(n.code,{children:"npm install"}),", it is recommended to operate using a non-root account. Alternatively, you can utilize the ",(0,o.jsx)(n.code,{children:"npm install --unsafe-perm"})," command. This approach eliminates the necessity for building libc or upgrading the host system."]})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Move the extracted files to the ",(0,o.jsx)(n.em,{children:"/opt"})," directory."]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"sudo mv /tmp/bundle /opt/Rocket.Chat\n"})}),"\n",(0,o.jsx)(n.admonition,{type:"info",children:(0,o.jsxs)(n.p,{children:["This guide uses the ",(0,o.jsx)(n.em,{children:"/opt directory"}),". However, you can choose your preferred directory."]})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Configure the Rocket.Chat service"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Add the Rocket.Chat user and set the proper permissions on the Rocket.Chat folder."}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"sudo useradd -M rocketchat && sudo usermod -L rocketchat\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"sudo chown -R rocketchat:rocketchat /opt/Rocket.Chat\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Create the Rocket.Chat service file."}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"cat << EOF |sudo tee -a /lib/systemd/system/rocketchat.service\n[Unit]\nDescription=The Rocket.Chat server\nAfter=network.target remote-fs.target nss-lookup.target nginx.service mongod.service\n[Service]\nExecStart=/usr/local/bin/node /opt/Rocket.Chat/main.js\nStandardOutput=syslog\nStandardError=syslog\nSyslogIdentifier=rocketchat\nUser=rocketchat\nEnvironment=MONGO_URL=mongodb://localhost:27017/rocketchat?replicaSet=rs01 MONGO_OPLOG_URL=mongodb://localhost:27017/local?replicaSet=rs01 ROOT_URL=http://localhost:3000/ PORT=3000\n[Install]\nWantedBy=multi-user.target\nEOFash\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Using ",(0,o.jsx)(n.code,{children:"sudo"})," and your preferred text editor, open the Rocket.Chat service file just created (",(0,o.jsx)(n.code,{children:"/usr/lib/systemd/system/rocketchat.service"}),"). Change the ",(0,o.jsx)(n.code,{children:"ROOT_URL"})," environmental variable to reflect the URL you want to access the server with.  Optionally, you can change the ",(0,o.jsx)(n.code,{children:"MONGO_URL"}),", ",(0,o.jsx)(n.code,{children:"MONGO_OPLOG_URL"})," and ",(0,o.jsx)(n.code,{children:"PORT"})," variables."]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"MONGO_URL=mongodb://localhost:27017/rocketchat?replicaSet=rs01\nMONGO_OPLOG_URL=mongodb://localhost:27017/local?replicaSet=rs01\nROOT_URL=http://your-host-name.com-as-accessed-from-internet:3000\nPORT=3000\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Set up the storage engine and replication for MongoDB."}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:'sudo sed -i "s/^#  engine:/  engine: mmapv1/"  /etc/mongod.conf\n'})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:'sudo sed -i "s/^#replication:/replication:\\n  replSetName: rs01/" /etc/mongod.conf\n'})}),"\n",(0,o.jsx)(n.admonition,{type:"warning",children:(0,o.jsx)(n.p,{children:"The MongoDB replica set is mandatory for Rocket.Chat > 1.0.0."})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Enable and start MongoDB with this command:"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"sudo systemctl enable mongod && sudo systemctl start mongod\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:'mongo --eval "printjson(rs.initiate())"\n'})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Enable and start Rocket.Chat using this command:"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"sudo systemctl enable rocketchat && sudo systemctl start rocketchat\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Configure your Rocket.Chat server"})}),"\n",(0,o.jsxs)(n.p,{children:["To access your Rocket.Chat workspace, open a web browser and navigate to the specified ROOT URL (",(0,o.jsx)(n.a,{href:"http://your-host-name.com-as-accessed-from-internet:3000",children:"http://your-host-name.com-as-accessed-from-internet:3000"}),"). Follow the configuration prompts to ",(0,o.jsx)(n.a,{href:"https://docs.rocket.chat/setup-and-configure/accessing-your-workspace/rocket.chat-setup-wizard#setup-wizard",children:"configure your workspace."})]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>c,x:()=>a});var o=t(96540);const s={},r=o.createContext(s);function c(e){const n=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),o.createElement(r.Provider,{value:n},e.children)}}}]);