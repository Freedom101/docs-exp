"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[28115],{29135:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>l,toc:()=>i});var o=s(74848),t=s(28453);const r={},a="Deploy on Kali",l={id:"deploy/deploy-rocket.chat/additional-deployment-methods/deploy-on-kali",title:"Deploy on Kali",description:"Preparation Steps",source:"@site/docs/deploy/deploy-rocket.chat/additional-deployment-methods/deploy-on-kali.md",sourceDirName:"deploy/deploy-rocket.chat/additional-deployment-methods",slug:"/deploy/deploy-rocket.chat/additional-deployment-methods/deploy-on-kali",permalink:"/docs-exp/docs/deploy/deploy-rocket.chat/additional-deployment-methods/deploy-on-kali",draft:!1,unlisted:!1,editUrl:"https://github.com/Freedom101/docs-exp/tree/main/my-website/docs/deploy/deploy-rocket.chat/additional-deployment-methods/deploy-on-kali.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"IBM Cloud",permalink:"/docs-exp/docs/deploy/deploy-rocket.chat/additional-deployment-methods/deploy-on-ibm-cloud"},next:{title:"Deploy on Windows 10",permalink:"/docs-exp/docs/deploy/deploy-rocket.chat/additional-deployment-methods/deploy-on-windows-10"}},c={},i=[{value:"Preparation Steps",id:"preparation-steps",level:2},{value:"<strong>Install Rocket.Chat on Kali</strong>",id:"install-rocketchat-on-kali",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h1,{id:"deploy-on-kali",children:"Deploy on Kali"}),"\n",(0,o.jsx)(n.h2,{id:"preparation-steps",children:"Preparation Steps"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Install necessary dependencies"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Update the package list and configure apt to install the official MongoDB packages with the following repository file:"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"sudo apt-get -y update\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"sudo apt-get install -y dirmngr gnupg && sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv 9DA31620334BD75D9DCB49F368818C72E52529D4\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'echo "deb http://repo.mongodb.org/apt/debian stretch/mongodb-org/4.0 main" | sudo tee /etc/apt/sources.list.d/mongodb-org-4.0.list\n'})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Configure Node.js to be installed via the package manager."}),"\n"]}),"\n",(0,o.jsx)(n.admonition,{type:"warning",children:(0,o.jsx)(n.p,{children:"Install the Node and MongoDB versions required for the Rocket.Chat release you intend to install."})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"sudo apt-get -y update && sudo apt-get install -y curl && curl -sL https://deb.nodesource.com/setup_12.x | sudo bash -\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Install build tools, MongoDB and dependencies (libcurl3 and MongoDB server), NodeJS, and graphicsmagick."}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"sudo apt-get install -y build-essential libcurl3 mongodb-org-server mongodb-org nodejs graphicsmagick\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Using npm install inherits and n, and the node version required by Rocket.Chat."}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"sudo npm install -g inherits n && sudo n 12.18.4\n"})}),"\n",(0,o.jsx)(n.h3,{id:"install-rocketchat-on-kali",children:(0,o.jsx)(n.strong,{children:"Install Rocket.Chat on Kali"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Download and extract the latest Rocket.Chat version with these commands:"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"curl -L https://releases.rocket.chat/latest/download -o /tmp/rocket.chat.tgz\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"tar -xzf /tmp/rocket.chat.tgz -C /tmp\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Install NPM."}),"\n"]}),"\n",(0,o.jsx)(n.admonition,{type:"warning",children:(0,o.jsxs)(n.p,{children:["When executing ",(0,o.jsx)(n.code,{children:"npm install"}),", it is recommended to operate using a non-root account. Alternatively, you can utilize the ",(0,o.jsx)(n.code,{children:"npm install --unsafe-perm"})," command. This approach eliminates the necessity for building libc or upgrading the host system."]})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"cd /tmp/bundle/programs/server && npm install\n"})}),"\n",(0,o.jsx)(n.admonition,{type:"info",children:(0,o.jsx)(n.p,{children:"This guide uses /opt but feel free to choose a different directory."})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"sudo mv /tmp/bundle /opt/Rocket.Chat\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Configure the Rocket.Chat service"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Add the rocketchat user and set the right permissions on the Rocket.Chat folder."}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"sudo useradd -M rocketchat && sudo usermod -L rocketchat\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"sudo chown -R rocketchat:rocketchat /opt/Rocket.Chat\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Create the Rocket.Chat service file."}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"cat << EOF |sudo tee -a /lib/systemd/system/rocketchat.service\n[Unit]\nDescription=The Rocket.Chat server\nAfter=network.target remote-fs.target nss-lookup.target nginx.service mongod.service\n[Service]\nExecStart=/usr/local/bin/node /opt/Rocket.Chat/main.js\nStandardOutput=syslog\nStandardError=syslog\nSyslogIdentifier=rocketchat\nUser=rocketchat\nEnvironment=MONGO_URL=mongodb://localhost:27017/rocketchat?replicaSet=rs01 MONGO_OPLOG_URL=mongodb://localhost:27017/local?replicaSet=rs01 ROOT_URL=http://localhost:3000/ PORT=3000\n[Install]\nWantedBy=multi-user.target\nEOF\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Open the service file  (",(0,o.jsx)(n.code,{children:"/lib/systemd/system/rocketchat.service"}),") using sudo and update the ",(0,o.jsx)(n.code,{children:"ROOT_URL"})," environmental variable to reflect the URL you are using to access the server. Optionally, you can change ",(0,o.jsx)(n.code,{children:"MONGO_URL"}),", ",(0,o.jsx)(n.code,{children:"MONGO_OPLOG_URL"})," and ",(0,o.jsx)(n.code,{children:"PORT"}),"."]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"MONGO_URL=mongodb://localhost:27017/rocketchat?replicaSet=rs01\nMONGO_OPLOG_URL=mongodb://localhost:27017/local?replicaSet=rs01\nROOT_URL=http://your-host-name.com-as-accessed-from-internet:3000\nPORT=3000\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Set up storage engine and replication for MongoDB. "}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'sudo sed -i "s/^#  engine:/  engine: wiredTiger/"  /etc/mongod.conf\n'})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'sudo sed -i "s/^#replication:/replication:\\n  replSetName: rs01/" /etc/mongod.conf\n'})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Enable and start MongoDB with the following command"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"sudo systemctl enable mongod && sudo systemctl start mongod\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Then, initiate  replica set with this command:"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'mongo --eval "printjson(rs.initiate())"\n'})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Enable and start your Rocket.Chat workspace now using this command:"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"sudo systemctl enable rocketchat && sudo systemctl start rocketchat\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Configure your Rocket.Chat server"})}),"\n",(0,o.jsxs)(n.p,{children:["To access your Rocket.Chat workspace, open a web browser and navigate to the specified ROOT URL (",(0,o.jsx)(n.a,{href:"http://your-host-name.com-as-accessed-from-internet:3000",children:"http://your-host-name.com-as-accessed-from-internet:3000"}),"). Follow the configuration prompts to ",(0,o.jsx)(n.a,{href:"https://docs.rocket.chat/setup-and-configure/accessing-your-workspace/rocket.chat-setup-wizard#setup-wizard",children:"configure your workspace."})]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Optional configurations"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"/docs-exp/docs/setup-and-configure/environment-configuration/firewall-configuration",children:"Configure firewall rule"})," "]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"/docs-exp/docs/setup-and-configure/environment-configuration/configuring-ssl-reverse-proxy",children:"Configure a HTTP reverse proxy to access Rocket.Chat server"})," "]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>l});var o=s(96540);const t={},r=o.createContext(t);function a(e){const n=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),o.createElement(r.Provider,{value:n},e.children)}}}]);