"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[30775],{77976:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>h,contentTitle:()=>r,default:()=>d,frontMatter:()=>o,metadata:()=>s,toc:()=>c});var i=n(85893),a=n(11151);const o={},r="Iframe-based Single Sign-On",s={id:"use-rocket.chat/authentication/iframe-based-single-sign-on",title:"Iframe-based Single Sign-On",description:"With an iframe-based single sign-on, you can implement authentication within an iframe (inline frame) embedded in a webpage. You can authenticate users inside Rocket.Chat automatically from a third-party application. It can be useful when embedding the chat inside another application to make the users' lives easier.&#x20;",source:"@site/docs/use-rocket.chat/authentication/iframe-based-single-sign-on.md",sourceDirName:"use-rocket.chat/authentication",slug:"/use-rocket.chat/authentication/iframe-based-single-sign-on",permalink:"/docs-exp/docs/use-rocket.chat/authentication/iframe-based-single-sign-on",draft:!1,unlisted:!1,editUrl:"https://github.com/Freedom101/docs-exp/tree/main/my-website/docs/use-rocket.chat/authentication/iframe-based-single-sign-on.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Authentication Across Plans",permalink:"/docs-exp/docs/use-rocket.chat/authentication/authentication-across-plans"},next:{title:"LDAP",permalink:"/docs-exp/docs/use-rocket.chat/authentication/ldap/"}},h={},c=[{value:"Integrate iframe with Rocket.Chat",id:"integrate-iframe-with-rocketchat",level:2},{value:"Embedd Rocket.Chat inside an iframe",id:"embedd-rocketchat-inside-an-iframe",level:3},{value:"Embed your own &quot;Loading page&quot; inside Rocket.Chat",id:"embed-your-own-loading-page-inside-rocketchat",level:3}];function l(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h1,{id:"iframe-based-single-sign-on",children:"Iframe-based Single Sign-On"}),"\n",(0,i.jsx)(t.p,{children:"With an iframe-based single sign-on, you can implement authentication within an iframe (inline frame) embedded in a webpage. You can authenticate users inside Rocket.Chat automatically from a third-party application. It can be useful when embedding the chat inside another application to make the users' lives easier. "}),"\n",(0,i.jsxs)(t.p,{children:["You can use the iframe integration in combination with ",(0,i.jsx)(t.a,{href:"https://developer.rocket.chat/rocket.chat/deeplink",children:"deeplinking"})," and ",(0,i.jsx)(t.code,{children:"resumeToken"}),". "]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"# get the resumeToken from your REST API login - it's the authToken field\nhttps://yourdomain.rocket.chat/home?resumeToken=abcd123456789\n"})}),"\n",(0,i.jsx)(t.h2,{id:"integrate-iframe-with-rocketchat",children:"Integrate iframe with Rocket.Chat"}),"\n",(0,i.jsx)(t.p,{children:"There are two ways to use the iframe integration for this purpose. It's important to note that both options require you to handle the user creation from your own application server using our APIs and make the login to retrieve the user's session token to pass it to the Rocket.Chat client via one of these ways:"}),"\n",(0,i.jsx)(t.h3,{id:"embedd-rocketchat-inside-an-iframe",children:"Embedd Rocket.Chat inside an iframe"}),"\n",(0,i.jsxs)(t.p,{children:["If you already have Rocket.Chat inside an iframe, you can use call commands inside that iframe. There",(0,i.jsx)(t.a,{href:"https://developer.rocket.chat/rocket.chat/iframe-integration/iframe-integration-sending-commands",children:" is a command to log in the user passing a token"}),". Retrieve the token from your APIs and then pass it to the iframe."]}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["Call your API to retrieve the token, for example ",(0,i.jsx)(t.code,{children:"/api/rocketchat/token"})]}),"\n",(0,i.jsx)(t.li,{children:"Your API will validate your session, probably via cookies."}),"\n",(0,i.jsxs)(t.li,{children:["Your API will then call the",(0,i.jsx)(t.a,{href:"https://developer.rocket.chat/reference/api",children:" Rocket.Chat APIs"})," to check if the user exists."]}),"\n",(0,i.jsx)(t.li,{children:"If it doesn't exist, call the Rocket.Chat APIs to create the user."}),"\n",(0,i.jsx)(t.li,{children:"If the user exists, call the Rocket.Chat APIs to make the login and receive the token."}),"\n",(0,i.jsx)(t.li,{children:"Return the token in your API response."}),"\n",(0,i.jsxs)(t.li,{children:["In your client, with the token, call the ",(0,i.jsx)(t.a,{href:"https://developer.rocket.chat/rocket.chat/iframe-integration/iframe-integration-sending-commands",children:"iframe methods to execute the login"}),"."]}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"embed-your-own-loading-page-inside-rocketchat",children:'Embed your own "Loading page" inside Rocket.Chat'}),"\n",(0,i.jsx)(t.p,{children:"This flow requires a page to be rendered in place of the normal Rocket.Chat's login page. It can be a basic loading screen since it's just for information."}),"\n",(0,i.jsxs)(t.p,{children:["The other setting you configure here is the ",(0,i.jsx)(t.a,{href:"https://developer.rocket.chat/rocket.chat/iframe-integration/what-is-iframe-auth",children:"API URL and Method"})," to be called once an unauthenticated user opens the Rocket.Chat. Then Rocket.Chat will make an HTTP call to your endpoint, expecting a ",(0,i.jsx)(t.a,{href:"https://developer.rocket.chat/rocket.chat/iframe-integration/what-is-iframe-auth#managing-mongodb-directly",children:"JSON response containing the authToken"}),". You should use cookies to identify if the user calling your API is authenticated and make the process to generate the Rocket.Chat's token and return it:"]}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Rocket.Chat will call the configured API and Method to retrieve the token."}),"\n",(0,i.jsx)(t.li,{children:"The API should validate your session via cookies."}),"\n",(0,i.jsx)(t.li,{children:"The API will then call the Rocket.Chat APIs to check if the user exists."}),"\n",(0,i.jsx)(t.li,{children:"If it doesn't exist, call the Rocket.Chat APIs to create the user."}),"\n",(0,i.jsx)(t.li,{children:"If the user exists, call the Rocket.Chat APIs to make the login and receive the token."}),"\n",(0,i.jsxs)(t.li,{children:["Return the token in your API response in JSON format as ",(0,i.jsx)(t.a,{href:"https://developer.rocket.chat/rocket.chat/iframe-integration/what-is-iframe-auth#managing-mongodb-directly",children:"described here"}),"."]}),"\n",(0,i.jsx)(t.li,{children:"Rocket.Chat will use the token automatically to make the authentication."}),"\n",(0,i.jsxs)(t.li,{children:["For this implementation, configure ",(0,i.jsx)(t.a,{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS",children:"CORS"})," and ",(0,i.jsx)(t.a,{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Frame-Options",children:"X-FRAME"}),": ","\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["Your server should ",(0,i.jsx)(t.strong,{children:"not"})," block the page you want to load inside the iframe. See ",(0,i.jsx)(t.a,{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Frame-Options",children:"X-FRAME"})," for more information on how to prevent this."]}),"\n",(0,i.jsxs)(t.li,{children:["Your server should ",(0,i.jsx)(t.strong,{children:"not"})," block the calls ",(0,i.jsx)(t.strong,{children:"from"})," Rocket.Chat's domain to your configured API endpoint. Calls between domains are often blocked by default. See ",(0,i.jsx)(t.a,{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Frame-Options",children:"CORS"})," for more information on how to prevent this."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"Along with the authentication options highlighted in this section, iframe-based sign-on also helps you integrate multiple web applications and create a seamless user experience."})]})}function d(e={}){const{wrapper:t}={...(0,a.a)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},11151:(e,t,n)=>{n.d(t,{Z:()=>s,a:()=>r});var i=n(67294);const a={},o=i.createContext(a);function r(e){const t=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),i.createElement(o.Provider,{value:t},e.children)}}}]);