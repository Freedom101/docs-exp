"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[20421],{3104:(e,i,t)=>{t.r(i),t.d(i,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>n,metadata:()=>o,toc:()=>c});var s=t(74848),r=t(28453);const n={description:"Blocking or allowing specific domain names or IPs address to communicate with your Matrix Homeserver"},a="Matrix Allow/Block List",o={id:"use-rocket.chat/workspace-administration/settings/federation/matrix-bridge/matrix-admin-guide/matrix-homeserver-setup/matrix-allow-block-list",title:"Matrix Allow/Block List",description:"Blocking or allowing specific domain names or IPs address to communicate with your Matrix Homeserver",source:"@site/docs/use-rocket.chat/workspace-administration/settings/federation/matrix-bridge/matrix-admin-guide/matrix-homeserver-setup/matrix-allow-block-list.md",sourceDirName:"use-rocket.chat/workspace-administration/settings/federation/matrix-bridge/matrix-admin-guide/matrix-homeserver-setup",slug:"/use-rocket.chat/workspace-administration/settings/federation/matrix-bridge/matrix-admin-guide/matrix-homeserver-setup/matrix-allow-block-list",permalink:"/docs-exp/docs/use-rocket.chat/workspace-administration/settings/federation/matrix-bridge/matrix-admin-guide/matrix-homeserver-setup/matrix-allow-block-list",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/use-rocket.chat/workspace-administration/settings/federation/matrix-bridge/matrix-admin-guide/matrix-homeserver-setup/matrix-allow-block-list.md",tags:[],version:"current",frontMatter:{description:"Blocking or allowing specific domain names or IPs address to communicate with your Matrix Homeserver"},sidebar:"tutorialSidebar",previous:{title:"Matrix Homeserver Setup",permalink:"/docs-exp/docs/use-rocket.chat/workspace-administration/settings/federation/matrix-bridge/matrix-admin-guide/matrix-homeserver-setup/"},next:{title:"Matrix User's Guide",permalink:"/docs-exp/docs/use-rocket.chat/workspace-administration/settings/federation/matrix-bridge/matrix-users-guide/"}},l={},c=[{value:"Synapse",id:"synapse",level:3},{value:"Block List",id:"block-list",level:4},{value:"Allow List",id:"allow-list",level:4},{value:"Dendrite",id:"dendrite",level:3},{value:"Federate Two or More Rocket.Chat Workspaces",id:"federate-two-or-more-rocketchat-workspaces",level:2}];function d(e){const i={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.h1,{id:"matrix-allowblock-list",children:"Matrix Allow/Block List"}),"\n",(0,s.jsx)(i.h3,{id:"synapse",children:"Synapse"}),"\n",(0,s.jsxs)(i.p,{children:["To configure your Matrix federation for specific workspaces, you can define a subset of whitelisted servers in your Synapse server's configuration file ",(0,s.jsx)(i.em,{children:(0,s.jsx)(i.strong,{children:"(data/homeserver.yaml)"})}),". By specifying this whitelist, you control which Matrix servers are allowed to federate with your workspace. If you don't specify this whitelist, the default behavior is to allow federation with any Matrix server. You can block undesired communication with specific homeservers or allow only the desired ones."]}),"\n",(0,s.jsx)(i.admonition,{type:"info",children:(0,s.jsxs)(i.p,{children:["See the official ",(0,s.jsx)(i.a,{href:"https://matrix-org.github.io/synapse/latest/usage/configuration/config_documentation.html#federation_domain_whitelist",children:"Synapse documentation"})," for more details about this configuration."]})}),"\n",(0,s.jsx)(i.h4,{id:"block-list",children:"Block List"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["Add the following to the Synapse configuration file:","\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"ip_range_blacklist"}),": Creates a block list by IP ranges (List all IPs you want as a YAML array)."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.admonition,{type:"info",children:(0,s.jsxs)(i.p,{children:["To learn more, see ",(0,s.jsx)(i.a,{href:"https://matrix-org.github.io/synapse/latest/upgrade.html#blacklisting-ip-ranges",children:"Blacklisting IP ranges"}),"."]})}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Then, restart synapse server with this command:"}),"\n"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{children:"docker restart synapse\n"})}),"\n",(0,s.jsx)(i.h4,{id:"allow-list",children:"Allow List"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["Add the following to the Synapse configuration file:","\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"ip_range_whitelist"}),": Creates an allow list by IP ranges (List all IPs you want as a YAML array)."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"federation_domain_whitelist"}),": Creates an allow list by domain names (List all domain names you want as a YAML array). Here is an example:"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{children:"federation_domain_whitelist:\n  - lon.example.com\n  - nyc.example.com\n  - syd.example.com\n"})}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Then, restart synapse server with this command:"}),"\n"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{children:"docker restart synapse\n"})}),"\n",(0,s.jsx)(i.admonition,{type:"info",children:(0,s.jsxs)(i.p,{children:["To learn more, see ",(0,s.jsx)(i.a,{href:"https://matrix-org.github.io/synapse/latest/usage/configuration/config_documentation.html#federation_domain_whitelist",children:"federation_domain_whitelist"}),"."]})}),"\n",(0,s.jsx)(i.h3,{id:"dendrite",children:"Dendrite"}),"\n",(0,s.jsx)(i.p,{children:"Currently, Dendrite does not support creating allow/block lists."}),"\n",(0,s.jsx)(i.h2,{id:"federate-two-or-more-rocketchat-workspaces",children:"Federate Two or More Rocket.Chat Workspaces"}),"\n",(0,s.jsx)(i.p,{children:"To set up two Rocket.Chat workspaces for exclusive federation between themselves,"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.a,{href:"./#standalone-manual-installation",children:"Configure each Rocket.Chat workspace"})," with its Matrix server separately "]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.a,{href:"/docs-exp/docs/use-rocket.chat/workspace-administration/settings/federation/matrix-bridge/matrix-admin-guide/matrix-homeserver-setup/matrix-allow-block-list#allow-list",children:"Whitelist the domains"})," of both Rocket.chat workspaces on each instance."]}),"\n"]})]})}function h(e={}){const{wrapper:i}={...(0,r.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453:(e,i,t)=>{t.d(i,{R:()=>a,x:()=>o});var s=t(96540);const r={},n=s.createContext(r);function a(e){const i=s.useContext(n);return s.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function o(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),s.createElement(n.Provider,{value:i},e.children)}}}]);